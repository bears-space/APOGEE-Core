<!doctype html><html><head><meta charset='utf-8'/>
<meta name='viewport' content='width=device-width,initial-scale=1'/>
<title>Vigilant Recovery</title></head><body style='font-family: sans-serif;'>
<h2>Vigilant Engine – Recovery</h2>
<p>Upload <b>main.bin</b> to <code>ota_0</code>.</p>
<input id='f' type='file' />
<button onclick='u()'>Upload & Boot</button>
<button onclick='c()'>Boot instead</button>
<pre id='o'></pre>
<script>
async function u(){
  const f=document.getElementById('f').files[0];
  if(!f){o('no file');return;}
  o('uploading '+f.name+' ('+f.size+' bytes)…');
  const buf=await f.arrayBuffer();
  const r=await fetch('/update',{method:'POST',headers:{'Content-Type':'application/octet-stream'},body:buf});
  o('server: '+(await r.text()));
}
function o(t){document.getElementById('o').textContent=t;}
function c(){fetch('/boot',{method:'POST'}).then(r=>r.text()).then(t=>o('server: '+t));}
</script></body></html>